<main class="main-content-area">
  <!-- Acceso r√°pido "Horario diario" integrado arriba de la tabla -->
  <div class="form-container" style="max-width:950px; margin:0 auto; text-align:center;">
    <h1 class="form-title" style="margin-bottom:18px;">Bienvenido{{#if username}}, {{username}}{{/if}} üëã</h1>
    <p style="font-size:1.13em; margin-bottom:28px;">
      Este es tu horario semanal. Aqu√≠ ver√°s tus asignaturas inscritas.
    </p>

    <!-- Botones de vista -->
    <div style="display:flex; justify-content:center; gap:16px; margin-bottom:24px;">
      <button id="btn-vista-semanal" class="tab-btn active" type="button">Vista semanal</button>
      <button id="btn-vista-mensual" class="tab-btn" type="button">Vista mensual</button>
    </div>

    <!-- VISTA SEMANAL -->
    <div id="vista-semanal">
      <div style="display:flex; justify-content:flex-end; margin-bottom:8px;">
        <a href="/horario" class="form-button btn-azul" style="font-size:0.98em; padding:7px 18px;">Ver horario diario</a>
      </div>
      <div style="overflow-x:auto;">
        <table class="horario-table" style="width:100%; border-collapse:separate; border-spacing:0; margin:0 auto; background:#f7f9fc; border-radius:12px; box-shadow:0 0 12px rgba(42,63,102,0.08);">
          <thead>
            <tr style="background:#3b5998; color:#fff;">
              <th style="padding:12px 4px; border:1.5px solid #3b5998; border-top-left-radius:10px;">Hora</th>
              <th style="padding:12px 4px; border:1.5px solid #3b5998;">Lunes</th>
              <th style="padding:12px 4px; border:1.5px solid #3b5998;">Martes</th>
              <th style="padding:12px 4px; border:1.5px solid #3b5998;">Mi√©rcoles</th>
              <th style="padding:12px 4px; border:1.5px solid #3b5998;">Jueves</th>
              <th style="padding:12px 4px; border:1.5px solid #3b5998; border-top-right-radius:10px;">Viernes</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">08:30 - 09:50</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "08:30 - 09:50") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "08:30 - 09:50") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "08:30 - 09:50") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "08:30 - 09:50") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "08:30 - 09:50") "Viernes"}}</td>
            </tr>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">10:00 - 11:20</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "10:00 - 11:20") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "10:00 - 11:20") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "10:00 - 11:20") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "10:00 - 11:20") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "10:00 - 11:20") "Viernes"}}</td>
            </tr>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">11:30 - 12:50</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "11:30 - 12:50") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "11:30 - 12:50") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "11:30 - 12:50") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "11:30 - 12:50") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "11:30 - 12:50") "Viernes"}}</td>
            </tr>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">13:00 - 14:20</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "13:00 - 14:20") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "13:00 - 14:20") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "13:00 - 14:20") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "13:00 - 14:20") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "13:00 - 14:20") "Viernes"}}</td>
            </tr>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">14:30 - 15:50</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "14:30 - 15:50") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "14:30 - 15:50") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "14:30 - 15:50") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "14:30 - 15:50") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "14:30 - 15:50") "Viernes"}}</td>
            </tr>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">16:00 - 17:20</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "16:00 - 17:20") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "16:00 - 17:20") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "16:00 - 17:20") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "16:00 - 17:20") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "16:00 - 17:20") "Viernes"}}</td>
            </tr>
            <tr>
              <td style="padding:10px 4px; border:1px solid #ced6e0; background:#eaf0fa; font-weight:600;">17:30 - 18:50</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "17:30 - 18:50") "Lunes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "17:30 - 18:50") "Martes"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "17:30 - 18:50") "Mi√©rcoles"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "17:30 - 18:50") "Jueves"}}</td>
              <td style="border:1px solid #ced6e0; background:#fff;">{{lookup (lookup horario "17:30 - 18:50") "Viernes"}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- VISTA MENSUAL -->
    <div id="vista-mensual" style="display:none;">
      <div style="margin: 40px auto; max-width: 700px; background: #f7f9fc; border-radius: 14px; border: 2px solid #3b5998; box-shadow: 0 2px 12px rgba(42,63,102,0.09); padding: 28px;">
        <h2 style="color:#3b5998; margin-bottom:18px; text-align:center;">Calendario mensual</h2>
        <div style="color:#3b5998; font-weight:600; text-align:center; margin-bottom:10px;">
          ¬°Clickea un d√≠a para agendar un recordatorio!
        </div>
        <div id="calendar-controls" style="display:flex; justify-content:center; align-items:center; gap:18px; margin-bottom:18px;">
          <button id="prev-month" class="tab-btn" type="button">&lt;</button>
          <span id="calendar-title" style="font-weight:600; font-size:1.15em; color:#3b5998;"></span>
          <button id="next-month" class="tab-btn" type="button">&gt;</button>
        </div>
        <div id="calendar-grid"></div>
        <!-- Modal para agregar recordatorio centrado -->
        <div id="add-reminder-modal" class="reminder-modal" style="display:none;">
          <form id="reminder-form" class="reminder-form">
            <h3 style="color:#3b5998; margin-bottom:10px;">Nuevo recordatorio</h3>
            <input type="text" id="reminder-title" placeholder="T√≠tulo (ej: Tarea 1)" required>
            <select id="reminder-subject" required>
              <option value="">Selecciona asignatura</option>
              {{#each asignaturas}}
                <option value="{{nombre}}">{{nombre}}</option>
              {{/each}}
            </select>
            <textarea id="reminder-desc" placeholder="Breve descripci√≥n..." rows="2" style="margin-bottom:12px; padding:10px 12px; border-radius:7px; border:1.5px solid #6a89cc; font-size:1.08em; color:#3b5998; background:#f7f9fc;"></textarea>
            <button type="submit" class="tab-btn" style="min-width:120px;">Agregar</button>
            <button type="button" id="close-reminder-modal" class="tab-btn" style="background:#eaf0fa; color:#3b5998; border:1.5px solid #3b5998; margin-top:8px;">Cancelar</button>
          </form>
        </div>
        <!-- Popup central para mostrar recordatorios del d√≠a -->
        <div id="reminder-popup" class="reminder-popup" style="display:none;">
          <div class="reminder-popup-content">
            <button id="close-popup" class="close-popup-btn">&times;</button>
            <h3 style="color:#3b5998; margin-bottom:10px;">Recordatorios del <span id="popup-date"></span></h3>
            <ul id="popup-reminders" style="padding-left:0; list-style:none;"></ul>
            <button id="open-add-reminder" class="tab-btn" style="margin-top:18px;" disabled>Agregar recordatorio</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
<script>
  // Alternar vistas
  const btnSemanal = document.getElementById('btn-vista-semanal');
  const btnMensual = document.getElementById('btn-vista-mensual');
  const vistaSemanal = document.getElementById('vista-semanal');
  const vistaMensual = document.getElementById('vista-mensual');
  btnSemanal.onclick = () => {
    btnSemanal.classList.add('active');
    btnMensual.classList.remove('active');
    vistaSemanal.style.display = '';
    vistaMensual.style.display = 'none';
  };
  btnMensual.onclick = () => {
    btnMensual.classList.add('active');
    btnSemanal.classList.remove('active');
    vistaSemanal.style.display = 'none';
    vistaMensual.style.display = '';
  };

  // Calendario mensual y recordatorios
  const calendarGrid = document.getElementById('calendar-grid');
  const calendarTitle = document.getElementById('calendar-title');
  const prevMonthBtn = document.getElementById('prev-month');
  const nextMonthBtn = document.getElementById('next-month');
  const addReminderModal = document.getElementById('add-reminder-modal');
  const reminderForm = document.getElementById('reminder-form');
  const reminderTitle = document.getElementById('reminder-title');
  const reminderSubject = document.getElementById('reminder-subject');
  const reminderDesc = document.getElementById('reminder-desc');
  const closeReminderModal = document.getElementById('close-reminder-modal');
  const reminderPopup = document.getElementById('reminder-popup');
  const closePopup = document.getElementById('close-popup');
  const popupDate = document.getElementById('popup-date');
  const popupReminders = document.getElementById('popup-reminders');
  const openAddReminder = document.getElementById('open-add-reminder');

  let currentDate = new Date();
  let selectedDay = null;
  let reminders = {}; // Se llenar√° desde la base de datos

  // Obtener recordatorios del backend
  async function fetchReminders() {
    const res = await fetch('/recordatorio');
    const data = await res.json();
    reminders = {};
    data.forEach(r => {
      // Forzar formato YYYY-MM-DD para evitar problemas de timezone
      const fecha = new Date(r.fecha);
      const fechaStr = fecha.toISOString().slice(0, 10);
      if (!reminders[fechaStr]) reminders[fechaStr] = [];
      reminders[fechaStr].push({ id: r.id, title: r.titulo, subject: r.asignatura, desc: r.descripcion });
    });
    renderCalendar(currentDate);
  }

  function renderCalendar(date) {
    calendarGrid.innerHTML = '';
    selectedDay = null;

    const year = date.getFullYear();
    const month = date.getMonth();
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const startDay = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1; // Lunes = 0
    const daysInMonth = lastDay.getDate();

    calendarTitle.textContent = `${firstDay.toLocaleString('es-ES', { month: 'long' }).charAt(0).toUpperCase() + firstDay.toLocaleString('es-ES', { month: 'long' }).slice(1)} ${year}`;

    // Header
    const days = ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'];
    const header = document.createElement('div');
    header.className = 'calendar-row calendar-header';
    days.forEach(d => {
      const cell = document.createElement('div');
      cell.className = 'calendar-cell calendar-header-cell';
      cell.textContent = d;
      header.appendChild(cell);
    });
    calendarGrid.appendChild(header);

    // Days
    let row = document.createElement('div');
    row.className = 'calendar-row';
    for (let i = 0; i < startDay; i++) {
      const emptyCell = document.createElement('div');
      emptyCell.className = 'calendar-cell calendar-empty';
      row.appendChild(emptyCell);
    }
    for (let day = 1; day <= daysInMonth; day++) {
      if ((row.children.length) % 7 === 0 && day !== 1) {
        calendarGrid.appendChild(row);
        row = document.createElement('div');
        row.className = 'calendar-row';
      }
      const cell = document.createElement('div');
      cell.className = 'calendar-cell calendar-day';
      const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
      cell.dataset.date = dateStr;
      // Puntito si hay recordatorio
      if (reminders[dateStr] && reminders[dateStr].length > 0) {
        cell.innerHTML = `<span class="calendar-dot"></span>`;
      }
      cell.innerHTML += `<span class="calendar-day-number">${day}</span>`;
      cell.onclick = () => {
        document.querySelectorAll('.calendar-cell.selected').forEach(c => c.classList.remove('selected'));
        cell.classList.add('selected');
        selectedDay = dateStr;
        openPopupForDay(dateStr);
      };
      row.appendChild(cell);
    }
    // Fill last row
    while (row.children.length < 7) {
      const emptyCell = document.createElement('div');
      emptyCell.className = 'calendar-cell calendar-empty';
      row.appendChild(emptyCell);
    }
    calendarGrid.appendChild(row);
  }

  prevMonthBtn.onclick = () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar(currentDate);
    closePopupModal();
  };
  nextMonthBtn.onclick = () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar(currentDate);
    closePopupModal();
  };

  // Popup modal central con hover/click para ver descripci√≥n y eliminar
  function openPopupForDay(dateStr) {
    popupDate.textContent = dateStr;
    popupReminders.innerHTML = '';
    openAddReminder.disabled = false;

    // Elimina cualquier toast anterior
    let toast = document.getElementById('popup-toast');
    if (toast) toast.style.display = 'none';

    if (reminders[dateStr] && reminders[dateStr].length > 0) {
      reminders[dateStr].forEach((rem) => {
        const li = document.createElement('li');
        li.className = 'popup-reminder-item';
        li.innerHTML = `
          <div class="reminder-header">
            <div>
              <b>${rem.title}</b><br>
              <span style="color:#6a89cc;">${rem.subject}</span>
            </div>
            <button class="reminder-delete-btn" title="Eliminar" aria-label="Eliminar recordatorio" tabindex="0">
              <svg width="22" height="22" viewBox="0 0 22 22" fill="none">
                <circle cx="11" cy="11" r="11" fill="#fbeee0"/>
                <path d="M8 9v5M11 9v5M14 9v5M5 7h12M9 7V6a2 2 0 1 1 4 0v1" stroke="#c0392b" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
        `;
        // Bot√≥n eliminar
        const delBtn = li.querySelector('.reminder-delete-btn');
        delBtn.onclick = async (e) => {
          e.stopPropagation();
          delBtn.disabled = true;
          await fetch('/recordatorio/' + rem.id, { method: 'DELETE' });
          await fetchReminders();
          closePopupModal(); // Cierra el popup despu√©s de eliminar
        };

        if (rem.desc) {
          const infoDiv = document.createElement('div');
          infoDiv.className = 'popup-reminder-desc';
          infoDiv.innerHTML = `<b>Descripci√≥n:</b><br><span>${rem.desc}</span>`;
          li.appendChild(infoDiv);
          li.onmouseenter = () => infoDiv.style.display = 'block';
          li.onmouseleave = () => infoDiv.style.display = 'none';
          li.onclick = (e) => {
            if (e.target === delBtn) return;
            infoDiv.style.display = (infoDiv.style.display === 'block') ? 'none' : 'block';
          };
        }
        popupReminders.appendChild(li);
      });
    } else {
      popupReminders.innerHTML = '<li style="color:#b0b0b0;">No hay recordatorios para este d√≠a.</li>';
    }
    reminderPopup.style.display = 'flex';
  }

  closePopup.onclick = closePopupModal;
  function closePopupModal() {
    reminderPopup.style.display = 'none';
    openAddReminder.disabled = true;
    selectedDay = null;
  }

  // Abrir modal para agregar recordatorio
  openAddReminder.onclick = (e) => {
    e.stopPropagation();
    if (!selectedDay) return;
    addReminderModal.style.display = 'flex';
    reminderTitle.value = '';
    reminderSubject.value = '';
    reminderDesc.value = '';
    setTimeout(() => reminderTitle.focus(), 100);
  };
  closeReminderModal.onclick = () => {
    addReminderModal.style.display = 'none';
  };

  // Agregar recordatorio (POST a backend)
  reminderForm.onsubmit = async (e) => {
    e.preventDefault();
    if (!selectedDay) return;
    const title = reminderTitle.value.trim();
    const subject = reminderSubject.value;
    const desc = reminderDesc.value.trim();
    if (!title || !subject) return;
    await fetch('/recordatorio', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        fecha: selectedDay,
        titulo: title,
        asignatura: subject,
        descripcion: desc
      })
    });
    addReminderModal.style.display = 'none';
    await fetchReminders();
    closePopupModal(); // Cierra el popup despu√©s de a√±adir
  };

  // Cerrar modal al hacer click fuera
  window.onclick = function(event) {
    if (event.target === addReminderModal) {
      addReminderModal.style.display = "none";
    }
    if (event.target === reminderPopup) {
      reminderPopup.style.display = "none";
      openAddReminder.disabled = true;
      selectedDay = null;
    }
  };

  document.addEventListener('DOMContentLoaded', fetchReminders);
</script>
<style>
  .tab-btn {
    background: #eaf0fa;
    color: #3b5998;
    border: 1.5px solid #3b5998;
    border-radius: 8px;
    padding: 10px 28px;
    font-weight: 600;
    font-size: 1.08em;
    cursor: pointer;
    transition: background 0.2s, color 0.2s;
  }
  .tab-btn.active, .tab-btn:focus {
    background: #3b5998;
    color: #fff;
    outline: none;
  }
  .tab-btn:hover {
    background: #d6e4ff;
  }
  .acceso-rapido-btn {
    min-width: 170px;
    padding: 12px 0;
    font-size: 1.08em;
    border-radius: 8px;
    background: #3b5998;
    color: #fff;
    text-align: center;
    font-weight: 600;
    border: none;
    box-shadow: 0 2px 8px rgba(42,63,102,0.07);
    transition: background 0.18s, color 0.18s;
    text-decoration: none;
    display: inline-block;
  }
  .acceso-rapido-btn:hover {
    background: #2d4373;
    color: #fff;
  }
  .calendar-row {
    display: flex;
  }
  .calendar-cell {
    flex: 1 1 0;
    min-width: 40px;
    min-height: 60px;
    border: 1px solid #eaf0fa;
    background: #fff;
    margin: 2px;
    border-radius: 8px;
    text-align: left;
    padding: 6px 6px 2px 8px;
    position: relative;
    cursor: pointer;
    transition: box-shadow 0.15s;
  }
  .calendar-header-cell {
    background: #3b5998;
    color: #fff;
    font-weight: 700;
    text-align: center;
    border: none;
    min-height: 32px;
    cursor: default;
  }
  .calendar-empty {
    background: transparent;
    border: none;
    cursor: default;
  }
  .calendar-day-number {
    font-weight: 700;
    color: #3b5998;
    font-size: 1.1em;
    display: block;
    margin-top: 12px;
  }
  .calendar-dot {
    display: block;
    width: 10px;
    height: 10px;
    background: #3b5998;
    border-radius: 50%;
    margin: 0 auto 2px auto;
  }
  .calendar-cell.selected {
    box-shadow: 0 0 0 2px #3b5998;
    z-index: 1;
  }
  /* Popup modal central */
  .reminder-popup {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(42,63,102,0.13);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
  }
  .reminder-popup-content {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 4px 24px rgba(42,63,102,0.13);
    padding: 28px 32px 22px 32px;
    min-width: 320px;
    max-width: 90vw;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
  .close-popup-btn {
    position: absolute;
    top: 14px;
    right: 18px;
    background: none;
    border: none;
    font-size: 2.2em;
    color: #3b5998;
    cursor: pointer;
    font-weight: bold;
    line-height: 1;
    z-index: 2;
    padding: 0;
  }
  .reminder-popup-content h3 {
    margin-top: 0;
    margin-bottom: 18px;
    padding-right: 40px; /* deja espacio para la cruz */
    text-align: center;
    font-size: 1.25em;
  }
  .popup-reminder-item {
    background: #eaf0fa;
    color: #3b5998;
    border-radius: 10px;
    padding: 14px 16px 12px 16px;
    margin-bottom: 14px;
    font-size: 1.07em;
    box-shadow: 0 2px 10px rgba(42,63,102,0.09);
    position: relative;
    cursor: pointer;
    transition: background 0.18s;
    overflow: visible;
  }
  .popup-reminder-item:hover {
    background: #d6e4ff;
  }
  .reminder-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
  }
  .reminder-delete-btn {
    background: #fff;
    border: none;
    border-radius: 50%;
    padding: 4px;
    box-shadow: 0 1px 4px rgba(192,57,43,0.10);
    cursor: pointer;
    transition: background 0.15s, box-shadow 0.15s;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: 10px;
    outline: none;
  }
  .reminder-delete-btn:hover, .reminder-delete-btn:focus {
    background: #ffeaea;
    box-shadow: 0 2px 8px rgba(192,57,43,0.18);
  }
  .reminder-delete-btn svg {
    display: block;
  }
  .popup-reminder-desc {
    display: none;
    position: absolute;
    left: 0;
    top: 110%;
    min-width: 220px;
    max-width: 320px;
    background: #fff;
    color: #3b5998;
    border: 1.5px solid #6a89cc;
    border-radius: 10px;
    padding: 12px 16px;
    box-shadow: 0 4px 18px rgba(42,63,102,0.13);
    z-index: 10;
    font-size: 1em;
    white-space: pre-line;
    margin-top: 8px;
    word-break: break-word;
  }
  @media (max-width: 700px) {
    .popup-reminder-desc {
      left: 0;
      top: 110%;
      min-width: 90vw;
      max-width: 98vw;
    }
  }
  /* Modal para agregar recordatorio */
  .reminder-modal {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(42,63,102,0.13);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2100;
  }
  .reminder-form {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 4px 24px rgba(42,63,102,0.13);
    padding: 28px 32px 22px 32px;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    min-width: 300px;
    max-width: 90vw;
  }
  .reminder-form input, .reminder-form select, .reminder-form textarea {
    margin-bottom: 12px;
    padding: 10px 12px;
    border-radius: 7px;
    border: 1.5px solid #6a89cc;
    font-size: 1.08em;
    color: #3b5998;
    background: #f7f9fc;
    transition: border 0.18s;
  }
  .reminder-form input:focus, .reminder-form select:focus, .reminder-form textarea:focus {
    border-color: #3b5998;
    outline: none;
    background: #eaf0fa;
  }
</style>